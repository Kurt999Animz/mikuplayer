/* --- CORE STYLES & THEME (Cute/Simple Miku Cyan) --- */
:root {
    --miku-primary: #0cc; /* Cyan/Teal */
    --miku-light: #0ff;
    --miku-background: #11222e; /* Soft Dark Blue */
    --miku-accent-bg: rgba(0, 204, 204, 0.15);
    --miku-text-light: #fff;
    --miku-text-dim: #ccc;
    --bpm:180;
    --beatInterval: calc(60000ms/var(--bpm));
}
/* Apply to all elements */
* {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(255,255,255,0.5) transparent; /* thumb, track */
}

/* Webkit browsers */
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0); /* transparent */
}

*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.5); /* semi-transparent */
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.7);
}

/* Remove arrows/buttons */
*::-webkit-scrollbar-button {
  display: none;
}

@font-face {
    font-family: "Vocafont";
    src: url(VOC-RE.ttf) format("truetype");
}
button {
    font-family: 'Vocafont';
}

body {
    font-family: 'Vocafont';
    margin: 0;
    background: var(--miku-background);
    overflow: hidden;
    color: var(--miku-text-light);

}

/* MAIN CONTAINER (scaled) */
#container {
    position: absolute;
    width: 1280px;
    height: 720px;
    overflow: hidden;
    background: #0d1e2a; /* Slightly darker base */
}

/* --- HEADER (Simple) --- */
header {
    position: absolute; top: 0; left: 0; width: 100%; height: 50px;
    display: flex; align-items: center; padding-left: 20px;
    background: rgba(0,0,0,0.5);
    z-index: 50;
    font-size: 20px; font-weight: bold;
    color: var(--miku-light);
    border-bottom: 2px solid var(--miku-primary);
    transform: translateY(-90px);
}

/* --- START MENU & BUTTON --- */
#startMenu {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    display:flex; align-items:center; justify-content:center;
    z-index:100;
    background: rgba(0,0,0,0.7);
    transition: opacity 0.5s;
}
#startBtn {
    font-size:32px; padding:20px 50px;
    background: transparent; color: var(--miku-primary);; 
    border: 3px solid var(--miku-primary);


}
#startBtn:hover { transform: scale(1.05);    background: var(--miku-primary); color: black;  }

@keyframes buttonSequence { 0%{transform:scale(1.5) translateY(0);} 100%{transform:scale(0.5) translateY(-300px); opacity: 0;} }
.btn-exit { animation: buttonSequence 1.5s ease-out forwards; }

/* --- LOADING SCREEN --- */
#loadingScreen {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 500px;
    opacity: 0;
    z-index: 900;
    text-align: center;
    pointer-events: none;
    animation: inandout calc(16 * var(--beatInterval)) linear forwards;
        animation-play-state: paused;

    
}



@keyframes inandout {
    0% { opacity: 0; transform: translateX(-90%); }
    50% { opacity: 1; transform: translateX(-50%); }
    100% { opacity: 0; transform: translateX(10%); }
}
.loading-text {
    font-size: 24px;
    margin-bottom: 15px;
    color: var(--miku-light);
}
.loading-bar {
    height: 14px;
    background: #1b1b1b;

    padding: 5px;
    position: relative;
    overflow: hidden;
}

.loading-fill {
    height: 100%;
    width: 0%;
background: linear-gradient(90deg, var(--miku-light), var(--miku-primary));

    position: relative;
    transition: width 0s linear; /* JS animates */

}

/* Segments */
.loading-fill::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background-image: repeating-linear-gradient(
        to right,
       #1b1b1b 0px,
       #1b1b1b 4px,
        transparent 3px,
        transparent 30px
    );
    pointer-events: none;
}


@keyframes loadIn { 0%{opacity: 0; transform: translateX(100px);} 100%{opacity: 1; transform: translateX(0);} }
@keyframes loadOut { 0%{opacity: 1; transform: translateX(0);} 100%{opacity: 0; transform: translateX(-100px);} }


#fallingImg {
    position: absolute;
    top: -300px;
    left: 50%;
    transform: translateX(-50%);
    width: 300px;
    opacity: 0;
    pointer-events: none;
    z-index: 999;

    animation: fallDown  calc(8 * var(--beatInterval)) linear forwards;
    animation-delay:  calc(8 * var(--beatInterval)) ;
    animation-play-state: paused; /* <-- IMPORTANT */
}

@keyframes fallDown {
    0% {
        top: -300px;
        opacity: 1;
        transform: translateX(100%) rotate(0deg);
    }
    100% {
        top: 800px;
        opacity: 0;
        transform: translateX(-200%) rotate(-767deg); /* SIXXXSEVEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEN*/
    }
}


/* --- MIGU (REINSTATED FLOAT) --- */
#migu {
    position:absolute; left:80px; bottom:-500px; width:500px;
    /* REINSTATED: floatUpDown animation */
    animation:floatUpDown 3s ease-in-out infinite;
    transition:bottom 0.8s cubic-bezier(0.34,1.56,0.64,1);
    z-index:10;
}
#migu.show { bottom:90px; }
@keyframes floatUpDown {0%{transform:translateY(0);}50%{transform:translateY(-20px);}100%{transform:translateY(0);}}

/* --- GRADIENT BEAT FLASH (REINSTATED) --- */
#beatGradient {
    position:absolute; bottom:-300px; left:0; width:100%; height:400px;
    opacity:0;
    background:linear-gradient(to top, rgba(0,255,255,0.8), rgba(0,255,255,0));
    pointer-events:none; z-index:9; /* Below Migu, above shapes */
    transition: bottom 0.1s ease-out, opacity 0.1s ease-out;
}

/* --- SONG PANEL (Reinstated from TOP) --- */
#songPanel {
    position:absolute; right: 20px; top: 60px; bottom: 90px; width: 400px;
    overflow-y: scroll;
    overflow-x: hidden;
    /* REINSTATED: animation from top */
    transform:translateY(-120%); opacity:0;
    transition: transform 1s cubic-bezier(0.19,1,0.22,1), opacity 0.5s;
    z-index:20;
    background: rgba(0, 0, 0, 0.6);
}
#songPanel.show { transform:translateY(0); opacity:1; }

#songList {
    width:100%; height:100%; overflow-y:auto; 
    padding: 10px 10px 10px 20px;
    box-sizing: border-box;
    scrollbar-width: thin; 
    scrollbar-color: rgba(0, 204, 204, 0.5) transparent; /* Miku Scrollbar */
}
#songList::-webkit-scrollbar { width:6px; }
#songList::-webkit-scrollbar-thumb { background: rgba(0, 204, 204, 0.5); border-radius:3px; }
#songList::-webkit-scrollbar-track { background: transparent; }

/* --- SONG ITEMS (Cuter/Simpler) --- */
.songItem {
    padding: 12px 10px;
    margin-bottom: 5px;
    cursor:pointer; 
    transition: all 0.2s;
    font-size: 18px; 
    display:flex; justify-content: space-between; align-items:center;
    background: transparent;
    color: var(--miku-text-dim);
    border-radius: 8px;
}
.songItem:hover { color: var(--miku-text-light); background: rgba(0, 204, 204, 0.05); }

.songItem.active { 
    font-weight:bold; 
    color: var(--miku-light); 
}

.playing-icon { height: 20px; width: auto; display: none; filter: drop-shadow(0 0 5px var(--miku-light)); }
.songItem.active .playing-icon { display: block; }

/* --- ANIMATED BACKGROUND (Pulsing Miku Color) --- */
#bg-shape-container {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 0; pointer-events: none;
    opacity: 0.5; 
    transition: opacity 0.1s ease-out;
}
.background-shapes { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

.background-shapes span {
    position: fixed; display: block;
    width: 40px; height: 40px;
    background: rgba(0, 204, 204, 0.5); 
    animation: float 15s infinite linear;
    bottom: -150px;

}
.background-shapes span:nth-child(1) { left: 10%; width: 30px; height: 30px;  animation-delay: 0s; animation-duration: 9s; }
.background-shapes span:nth-child(1) { left: 90%; width: 30px; height: 30px;  animation-delay: 1s; animation-duration: 10s; }
.background-shapes span:nth-child(2) { left: 25%; width: 110px; height: 110px ; animation-delay: 2s; animation-duration: 8s; }
.background-shapes span:nth-child(3) { left: 70%; width: 20px; height: 20px; animation-delay: 4s;animation-duration: 12s;  }
.background-shapes span:nth-child(4) { left: 40%; width: 60px; height: 60px; animation-delay: 0s; animation-duration: 7s; }
.background-shapes span:nth-child(5) { left: 65%; width: 60px; height: 60px; animation-delay: 0s;animation-duration: 12s;  }
.background-shapes span:nth-child(6) { left: 95%; width: 90px; height: 90px; animation-delay: 3s; animation-duration: 9; }
.background-shapes span:nth-child(7) { left: 1%; width: 90px; height: 90px; animation-delay: 5s; animation-duration: 11; }

@keyframes float {
    0% { transform: translateY(0) rotate(0deg); opacity: 0.5; }
    100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; }
}

/* --- FOOTER (Simpler, Cutier) --- */
footer {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 80px;
    background: rgba(0, 0, 0, 0.8);
    border-top: 2px solid var(--miku-primary);
    display: flex; align-items: center; justify-content: space-between;
    z-index: 60;
    padding-right: 20px;
    box-sizing: border-box;
    transform: translateY(90px);
}

footer, header {
    transition: 1s;
}

.album-art-container {position: fixed;width: 80px; height: 80px; flex-shrink: 0; transform: translate(-35px, 35px) scale(1.5);}
#rotatingArt { width: 100%; height: 100%; object-fit: cover; animation: spinArt 10s linear infinite; }
@keyframes spinArt {
    0% { transform: rotate(0deg) scale(1.5); }
    100% { transform: rotate(360deg) scale(1.5); } }

.controls-area { display: flex; align-items: center; gap: 20px; flex-grow: 1; padding-left: 100px; }
.song-info { display: flex; flex-direction: column; min-width: 200px; }
.song-title { font-size: 18px; color: var(--miku-text-light); font-weight: bold; }
.song-artist { font-size: 14px; color: var(--miku-primary); }

.btn-control { background: none; border: none; cursor: pointer; color: white; transition: 0.2s; }
.btn-control svg { width: 32px; height: 32px; fill: var(--miku-text-light); }
.btn-control:hover svg { fill: var(--miku-primary); filter: drop-shadow(0 0 5px var(--miku-primary)); }

.volume-container { display: flex; align-items: center; gap: 10px; }



input[type=range] { -webkit-appearance: none; width: 100px; background: transparent; }
input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%;
    background: var(--miku-primary); cursor: pointer; margin-top: -6px;
}
input[type=range]::-webkit-slider-runnable-track {
    width: 100%; height: 4px; cursor: pointer; background: #444; border-radius: 2px;
}


